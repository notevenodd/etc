#!/bin/sh

# Usage: $0 [ARGS]...
# invoke tiddlywiki
#
# Make sure you have installed TiddlyWiki, see:
# https://tiddlywiki.com/#Installing%20TiddlyWiki%20on%20Node.js

exists() { command -v "$@" > /dev/null ; }

# find how to call node.js
NODEJS='node'
exists "$NODEJS" || NODEJS='nodejs'
exists "$NODEJS" || die 'cannot find node.js'

TW="$HOME/.local/lib/node_modules/.bin/tiddlywiki"
[ -e "$TW" ] || die 'cannot find tiddlywiki => to install it: cd ~/.local/lib && npm install tiddlywiki'
exec "$NODEJS" "$TW" "$@"
